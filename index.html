<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>My Phone</title>
    
    <!-- 外部字体和库的链接 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>

    <!-- 链接你的外部样式表 -->
    <link rel="stylesheet" href="style.css">

    <!-- 用于 JS 动态注入样式的 style 标签 (保留) -->
    <style id="dynamic-font-style"></style>
    <style id="custom-bubble-style"></style>
    <!-- 新增: 仅用于气泡编辑预览 -->
    <style id="bubble-preview-style"></style>
</head>
<body>
    <!-- SVG 图标定义 -->
    <svg style="display: none;"><defs>
        <filter id="thumb-shadow" x="-50%" y="-50%" width="200%" height="200%">
            <feDropShadow dx="0" dy="1" stdDeviation="2" flood-color="#000000" flood-opacity="0.15"/>
        </filter>
        <symbol id="icon-back" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></symbol>
        <symbol id="icon-chevron-right" viewBox="0 0 8 13" fill="none"><path d="M8.00003 6.49658C8.00003 6.21603 7.89739 5.98337 7.67842 5.76441L2.40952 0.61183C2.23161 0.433919 2.01949 0.351807 1.7663 0.351807C1.2531 0.351807 0.835693 0.755528 0.835693 1.26873C0.835693 1.52191 0.945177 1.75457 1.12993 1.93932L5.81036 6.48974L1.12993 11.0538C0.945177 11.2386 0.835693 11.4644 0.835693 11.7244C0.835693 12.2376 1.2531 12.6482 1.7663 12.6482C2.01949 12.6482 2.23161 12.5592 2.40952 12.3813L7.67842 7.22875C7.90423 7.00978 8.00003 6.77713 8.00003 6.49658Z"/></symbol>
        <symbol id="icon-sidebar-toggle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></symbol>
        <symbol id="icon-person" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></symbol>
        <symbol id="icon-key" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path></symbol>
        <symbol id="icon-data" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></symbol>
        <symbol id="icon-lock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></symbol>
        <symbol id="icon-generate" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></symbol>
        <symbol id="icon-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></symbol>
        <symbol id="icon-plus-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></symbol>
        <symbol id="icon-more-horizontal" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></symbol>
        <symbol id="icon-wechat-chat" viewBox="0 0 28 28" fill="currentColor"><path d="M14 4C8.48 4 4 8.04 4 13c0 3.51 2.36 6.51 5.61 7.52c-.17.6-.64 2.1-1.91 3.03c-.23.17-.16.54.1.61c1.4.39 3.42-.4 4.5-1.07c.55.1 1.12.16 1.7.16c5.52 0 10-4.04 10-9S19.52 4 14 4z"/></symbol>
        <symbol id="icon-wechat-contacts" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></symbol>
        <symbol id="icon-wechat-discover" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line></symbol>
        <symbol id="icon-wechat-me" viewBox="0 0 28 28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></symbol>
        <symbol id="icon-chat-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></symbol>
        <symbol id="icon-chat-emoji" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line></symbol>
        <symbol id="icon-chat-send" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></symbol>
        <symbol id="icon-chat-cancel" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></symbol>
        <symbol id="icon-chat-reply" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></symbol>
        <symbol id="icon-chat-stop" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></symbol>
        <symbol id="icon-paint-brush" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></symbol>
        <symbol id="icon-reset" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path><polyline points="21 2 21 8 15 8"></polyline></symbol>
        <symbol id="icon-settings-gear" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></symbol>
        <symbol id="icon-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></symbol>
        <symbol id="icon-folder" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></symbol>
        <symbol id="icon-settings-dots" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="5" r="2"></circle><circle cx="12" cy="12" r="2"></circle><circle cx="12" cy="19" r="2"></circle></symbol>
        <!-- P站图标 -->
        <symbol id="icon-psite-discover" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></symbol>
        <symbol id="icon-psite-messages" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></symbol>
        <symbol id="icon-psite-profile" viewBox="0 0 24 24" fill="currentColor"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></symbol>
        <symbol id="icon-play-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></symbol>
        <symbol id="icon-comment" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></symbol>
        <symbol id="icon-heart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></symbol>
        <symbol id="icon-heart-filled" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></symbol>
        <!-- 20个功能图标 -->
        <symbol id="icon-panel-voice" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></symbol>
        <symbol id="icon-panel-video" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></symbol>
        <symbol id="icon-panel-camera" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></symbol>
        <symbol id="icon-panel-image" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></symbol>
        <symbol id="icon-panel-location" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></symbol>
        <symbol id="icon-panel-listen" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3z"></path></symbol>
        <symbol id="icon-panel-redpacket" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6z"></path><circle cx="12" cy="12" r="3"></circle></symbol>
        <symbol id="icon-panel-stalk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></symbol>
        <symbol id="icon-panel-gift" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></symbol>
        <symbol id="icon-panel-link" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></symbol>
        <symbol id="icon-panel-heartvoice" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19.07 12.94A6.7 6.7 0 0 0 12 4.21a6.7 6.7 0 0 0-7.07 8.73l7.07 7.07 7.07-7.07z"></path><path d="M21 10.94V12a2 2 0 0 1-2 2h-1"></path><path d="M3 10.94V12a2 2 0 0 0 2 2h1"></path></symbol>
        <symbol id="icon-panel-game" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V6M12 18v-2M16 12h2M6 12H4M9.5 9.5l-1-1M15.5 15.5l-1-1M9.5 14.5l-1 1M15.5 8.5l-1 1" /><path d="M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" /></symbol>
        <symbol id="icon-panel-pickup" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><path d="M1 10h4"></path><path d="M19 10h4"></path></symbol>
        <symbol id="icon-panel-checkphone" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="8" y="3" width="10" height="15" rx="2"></rect><path d="M16 14.5a4 3 0 0 1-4 3h-.5a4 3 0 0 1 0-6h.5a4 3 0 0 1 4 3z" /></symbol>
        <symbol id="icon-panel-intimacy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></symbol>
        <symbol id="icon-panel-reroll" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"></path><path d="M20.49 15a9 9 0 0 1-14.85 3.36L1 14"></path></symbol>
        <symbol id="icon-panel-clothes" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H20.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"></path><path d="M22 10v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10"></path></symbol>
        <symbol id="icon-panel-pomodoro" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="14" r="8"></circle><path d="M12 3v1m-1.5-1.5.75.75M13.5 2.5l-.75.75"></path></symbol>
        <symbol id="icon-panel-decode" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path><path d="M12 17v-2"></path></symbol>
        <symbol id="icon-panel-card" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line><path d="M8 14h.01"></path><path d="M12 14h.01"></path></symbol>
        <symbol id="icon-panel-memo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></symbol>
        <!-- 新增: 线下模式侧边栏图标 -->
        <symbol id="icon-sidebar-preset" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></symbol>
        <symbol id="icon-sidebar-worldbook" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></symbol>
        <symbol id="icon-sidebar-regex" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 16s-1-2-4-2-4 2-4 2M9 10a1 1 0 1 0 2 0 1 1 0 1 0-2 0m6 0a1 1 0 1 0 2 0 1 1 0 1 0-2 0"></path></symbol>
        <symbol id="icon-sidebar-opening" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></symbol>
        <symbol id="icon-sidebar-personas" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></symbol>
        <symbol id="icon-sidebar-character" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline></symbol>
        <!-- 新增: 论坛详情页图标 -->
        <symbol id="icon-retweet" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></symbol>
        <symbol id="icon-share" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line></symbol>
        <!-- 新增: 音乐App图标 -->
        <symbol id="icon-music-playlist" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></symbol>
        <symbol id="icon-music-recommend" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></symbol>
        <symbol id="icon-music-charts" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></symbol>
        <symbol id="icon-music-radio" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20v-8m0 0V4a4 4 0 1 0-8 0v8"></path><circle cx="12" cy="12" r="8"></circle><path d="M12 12v8"></path><path d="M12 4a4 4 0 0 1 8 0v8"></path>
        <!-- 新增: 音乐播放/暂停图标 -->
<symbol id="icon-play-circle-filled" viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/>
</symbol>
<symbol id="icon-pause-circle-filled" viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"/>
      </symbol>
      <!-- 新增: 音乐播放器图标 -->
<symbol id="icon-player-prev" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></symbol>
<symbol id="icon-player-next" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></symbol>
<symbol id="icon-player-play" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></symbol>
<symbol id="icon-player-pause" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></symbol>
<symbol id="icon-player-comment" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></symbol>
<symbol id="icon-player-repeat" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></symbol>
<symbol id="icon-player-repeat-one" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 2l4 4-4 4"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><path d="M7 22l-4-4 4-4"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/><path d="M11 10h1v4"/></symbol>
<symbol id="icon-player-shuffle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="16 21 21 21 21 16"></polyline><line x1="4" y1="4" x2="15" y2="15"></line></symbol>
   <!-- ▼▼▼ 在这里添加新的灵动岛相关SVG图标 ▼▼▼ -->
    <symbol id="icon-island-visualizer" viewBox="0 0 24 24" fill="currentColor">
        <path d="M6 18h2V6H6v12zm4 4h2V2h-2v20zm4-8h2v-8h-2v8zm4 4h2V8h-2v8z"/>
    </symbol>
    <symbol id="icon-island-heart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
    </symbol>
    <symbol id="icon-island-prev" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></symbol>
    <symbol id="icon-island-play" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></symbol>
    <symbol id="icon-island-pause" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></symbol>
    <symbol id="icon-island-next" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></symbol>
    <symbol id="icon-island-list" viewBox="0 0 24 24" fill="currentColor">
        <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zm0-8h14V7H7v2z"/>
    </symbol>
    <!-- ▲▲▲ SVG图标添加结束 ▲▲▲ -->
    </defs></svg>

    <div class="phone-container">
        <div class="status-bar">
            <span id="status-bar-time"></span>
            <div class="status-bar-right">
                <span id="battery-percentage"></span>
                <div class="battery-icon">
                    <div id="battery-fill"></div>
                </div>
            </div>
        </div>

        <!-- ▼▼▼ 在这里添加新的灵动岛HTML代码 ▼▼▼ -->
        <div id="dynamic-island" class="dynamic-island">
            <!-- 默认收起状态（播放音乐时显示） -->
            <div id="island-collapsed-content" class="island-content">
                <img id="island-album-art" src="" class="island-album-art">
                <div id="island-visualizer" class="island-visualizer">
                    <svg><use href="#icon-island-visualizer"></use></svg>
                </div>
            </div>

            <!-- 展开后的小播放器 -->
            <div id="island-expanded-content" class="island-content island-player-container">
                <!-- 歌曲信息行 -->
                <div class="player-header-row">
                    <img id="island-player-album-art" src="" class="player-album-art-expanded">
                    <div class="player-song-details">
                        <p id="island-player-title" class="song-title">歌曲名称</p>
                        <p id="island-player-artist" class="song-artist">歌手</p>
                    </div>
                </div>
                <!-- 进度条 -->
                <div class="player-progress-row">
                    <span id="island-player-current-time">0:00</span>
                    <input type="range" id="island-player-progress-slider" value="0">
                    <span id="island-player-duration">0:00</span>
                </div>
                <!-- 控制按钮 -->
                <div class="player-controls-row">
                    <button id="island-player-like-btn" class="island-player-button"><svg><use href="#icon-island-heart"></use></svg></button>
                    <button id="island-player-prev-btn" class="island-player-button"><svg><use href="#icon-island-prev"></use></svg></button>
                    <button id="island-player-play-pause-btn" class="island-player-button"><svg><use href="#icon-island-play"></use></svg></button>
                    <button id="island-player-next-btn" class="island-player-button"><svg><use href="#icon-island-next"></use></svg></button>
                    <button id="island-player-list-btn" class="island-player-button"><svg><use href="#icon-island-list"></use></svg></button>
                </div>
            </div>
        </div>
        <!-- ▲▲▲ HTML代码添加结束 ▲▲▲ -->

        <div class="page-stack">
            <!-- 所有页面结构 -->
            <div id="home-screen" class="page active"></div>
            <div id="settings-screen" class="page"></div>
            <div id="music-screen" class="page"></div>
            <div id="user-profile-edit-screen" class="page"></div>
            <div id="api-settings-screen" class="page"></div>
            <div id="check-phone-char-list-screen" class="page"></div>
            <div id="check-phone-home-screen" class="page"></div>
            <div id="check-phone-diary-screen" class="page"></div>
            <div id="diary-view-screen" class="page"></div>
            <div id="diary-password-screen" class="page"></div>
            <div id="wechat-screen" class="page"></div>
            <div id="chat-conversation-screen" class="page"></div>
            <div id="character-editor-screen" class="page"></div>
            <div id="world-book-screen" class="page"></div>
            <div id="world-book-category-view-screen" class="page"></div>
            <div id="world-book-editor-screen" class="page"></div>
            <div id="world-book-category-screen" class="page"></div>
            <div id="preset-screen" class="page"></div>
            <div id="preset-editor-screen" class="page"></div>
            <div id="chat-settings-screen" class="page"></div>
            <div id="beautification-settings-screen" class="page"></div>
            <div id="user-persona-editor-screen" class="page"></div>
            <div id="user-persona-management-screen" class="page"></div>
            <div id="global-beautification-screen" class="page"></div>
            <div id="psite-screen" class="page"></div>
            <div id="psite-post-view-screen" class="page"></div>
            <div id="offline-mode-screen" class="page"></div>
            <div id="regex-editor-screen" class="page"></div>
            <div id="forum-char-list-screen" class="page"></div>
            <div id="forum-screen" class="page"></div>
            <div id="forum-post-detail-screen" class="page"></div>
            <div id="bubble-editor-screen" class="page"></div>
            
            <!-- 新增：音乐歌单页面 -->
            <div id="music-playlist-screen" class="page"></div>
            <!-- 新增：音乐播放器页面 -->
            <div id="music-player-screen" class="page"></div>
            <!-- 新增：音乐添加/编辑页面 -->
            <div id="music-add-song-screen" class="page"></div>
            <!-- ▼▼▼ 【全新】手动输入歌词弹窗 ▼▼▼ -->
<div id="manual-lyrics-dialog" class="ios-dialog-overlay">
    <div class="ios-dialog" style="width: 320px;">
        <div class="dialog-title">手动输入歌词</div>
        <div class="dialog-content" style="padding: 10px 16px;">
            <textarea id="manual-lyrics-input" rows="10" style="width: 100%; font-size: 12px; line-height: 1.5; resize: none;" placeholder="请粘贴LRC格式的歌词...&#10;例如:&#10;[00:33.37]滴入我回忆&#10;[00:38.40]爱又像一场旅行"></textarea>
        </div>
        <div class="dialog-buttons">
            <button id="manual-lyrics-cancel-btn" class="dialog-btn">取消</button>
            <button id="manual-lyrics-confirm-btn" class="dialog-btn">确认</button>
        </div>
    </div>
</div>
<!-- ▲▲▲ 弹窗结束 ▲▲▲ -->
        <!-- 音乐App侧边栏 -->
        <div id="music-sidebar-overlay" class="music-sidebar-overlay"></div>
        <div id="music-sidebar" class="music-sidebar">
            <div class="music-sidebar-profile">
                <img id="music-sidebar-avatar" class="music-sidebar-avatar" src="">
                <span id="music-sidebar-name" class="music-sidebar-name"></span>
            </div>
            <nav class="music-sidebar-nav">
                <div class="music-sidebar-nav-item"><svg class="svg-icon"><use href="#icon-paint-brush"></use></svg> <span>主题设置</span></div>
                <div class="music-sidebar-nav-item"><svg class="svg-icon"><use href="#icon-panel-listen"></use></svg> <span>音质选择</span></div>
                <div class="music-sidebar-nav-item"><svg class="svg-icon"><use href="#icon-settings-gear"></use></svg> <span>关于</span></div>
            </nav>
        </div>

        <!-- Action Sheets & Dialogs -->
        <div id="upload-photo-widget-sheet" class="action-sheet-overlay">
            <div class="action-sheet">
                <div class="action-sheet-group">
                    <button id="photo-widget-upload-local-btn" class="action-sheet-btn">从本地上传</button>
                    <button id="photo-widget-upload-url-btn" class="action-sheet-btn">从URL上传</button>
                </div>
                <div class="action-sheet-group cancel"><button class="action-sheet-btn cancel-btn">取消</button></div>
            </div>
        </div>
        <div id="add-world-book-sheet" class="action-sheet-overlay">
            <div class="action-sheet">
                <div class="action-sheet-group">
                    <button id="upload-from-file-btn" class="action-sheet-btn">从文件上传</button>
                    <button id="add-new-book-btn" class="action-sheet-btn">新建世界书</button>
                </div>
                <div class="action-sheet-group cancel"><button class="action-sheet-btn cancel-btn">取消</button></div>
            </div>
        </div>
        <div id="add-preset-sheet" class="action-sheet-overlay">
            <div class="action-sheet">
                <div class="action-sheet-group">
                    <button id="upload-preset-from-file-btn" class="action-sheet-btn">从文件上传</button>
                    <button id="add-new-preset-btn" class="action-sheet-btn">新建预设</button>
                </div>
                <div class="action-sheet-group cancel"><button class="action-sheet-btn cancel-btn">取消</button></div>
            </div>
        </div>
        <div id="add-character-sheet" class="action-sheet-overlay">
            <div class="action-sheet">
                <div class="action-sheet-group">
                    <button id="add-char-manual-btn" class="action-sheet-btn">手动创建角色</button>
                    <button id="import-char-card-btn" class="action-sheet-btn">从角色卡导入 (.json/.png)</button>
                </div>
                <div class="action-sheet-group cancel"><button class="action-sheet-btn cancel-btn">取消</button></div>
            </div>
        </div>
        <div id="world-book-category-action-sheet" class="action-sheet-overlay">
            <div class="action-sheet">
                <div class="action-sheet-group">
                    <button id="enable-all-in-category-btn" class="action-sheet-btn">启用该分类全部</button>
                    <button id="disable-all-in-category-btn" class="action-sheet-btn">禁用该分类全部</button>
                </div>
                <div class="action-sheet-group cancel"><button class="action-sheet-btn cancel-btn">取消</button></div>
            </div>
        </div>
        <div id="add-sticker-sheet" class="action-sheet-overlay">
            <div class="action-sheet">
                <div class="action-sheet-group">
                    <button id="add-sticker-local-btn" class="action-sheet-btn">从本地上传</button>
                    <button id="add-sticker-url-btn" class="action-sheet-btn">从URL上传</button>
                </div>
                <div class="action-sheet-group cancel"><button class="action-sheet-btn cancel-btn">取消</button></div>
            </div>
        </div>
        <div id="upload-wallpaper-sheet" class="action-sheet-overlay">
            <div class="action-sheet">
                <div class="action-sheet-group">
                    <button id="wallpaper-upload-local-btn" class="action-sheet-btn">从本地上传</button>
                    <button id="wallpaper-upload-url-btn" class="action-sheet-btn">从URL上传</button>
                </div>
                <div class="action-sheet-group cancel"><button class="action-sheet-btn cancel-btn">取消</button></div>
            </div>
        </div>
        <div id="upload-icon-sheet" class="action-sheet-overlay">
            <div class="action-sheet">
                <div class="action-sheet-group">
                    <button id="icon-upload-local-btn" class="action-sheet-btn">从本地上传</button>
                    <button id="icon-upload-url-btn" class="action-sheet-btn">从URL上传</button>
                </div>
                <div class="action-sheet-group cancel"><button class="action-sheet-btn cancel-btn">取消</button></div>
            </div>
        </div>

        <div id="ios-confirm-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog">
                <div id="dialog-title" class="dialog-title"></div>
                <div id="dialog-text" class="dialog-text"></div>
                <div class="dialog-buttons">
                    <button id="dialog-cancel-btn" class="dialog-btn">取消</button>
                    <button id="dialog-confirm-btn" class="dialog-btn destructive">确认</button>
                </div>
            </div>
        </div>
        <div id="wb-association-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog">
                <div class="dialog-title">关联局部世界书</div>
                <div class="dialog-content" id="wb-association-list"></div>
                <div class="dialog-buttons">
                    <button id="wb-association-cancel-btn" class="dialog-btn">取消</button>
                    <button id="wb-association-confirm-btn" class="dialog-btn">确认</button>
                </div>
            </div>
        </div>
        <div id="user-persona-selection-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog">
                <div class="dialog-title">选择或新建用户面具</div>
                <div class="dialog-content" id="user-persona-selection-list"></div>
                <div class="dialog-buttons">
                    <button id="user-persona-create-btn" class="dialog-btn">新建面具</button>
                    <button id="user-persona-selection-confirm-btn" class="dialog-btn">确认</button>
                </div>
            </div>
        </div>
        <div id="sticker-url-upload-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog" style="width: 320px;">
                <div class="dialog-title">从URL上传表情包</div>
                <div class="dialog-content">
                    <div class="url-upload-tabs">
                        <div class="url-upload-tab active" data-pane="single-url-pane">单个URL</div>
                        <div class="url-upload-tab" data-pane="batch-url-pane">批量识别</div>
                    </div>
                    <div id="single-url-pane" class="url-upload-pane active">
                        <div class="form-group" style="margin-bottom: 10px;"><label>图片URL</label><input type="text" id="single-sticker-url" placeholder="http://..."></div>
                        <div class="form-group"><label>备注</label><input type="text" id="single-sticker-remark" placeholder="选填"></div>
                        <img id="sticker-url-preview" src="">
                    </div>
                    <div id="batch-url-pane" class="url-upload-pane">
                        <div class="form-group">
                            <label>批量输入</label>
                            <textarea id="batch-sticker-urls" rows="6" placeholder="格式:&#10;备注1: 图片URL1&#10;备注2: 图片URL2"></textarea>
                        </div>
                    </div>
                </div>
                <div class="dialog-buttons">
                    <button id="sticker-url-upload-cancel-btn" class="dialog-btn">取消</button>
                    <button id="sticker-url-upload-confirm-btn" class="dialog-btn">确认上传</button>
                </div>
            </div>
        </div>
        <div id="sticker-grouping-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog">
                <div class="dialog-title">移动到分组</div>
                <div class="dialog-content" id="sticker-grouping-list"></div>
                <div class="dialog-buttons">
                    <button id="sticker-grouping-create-btn" class="dialog-btn">新建分组</button>
                    <button id="sticker-grouping-confirm-btn" class="dialog-btn">确认</button>
                </div>
            </div>
        </div>
        
        <!-- P站新增弹窗 -->
        <div id="psite-age-gate-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog">
                <div class="dialog-title">年龄确认</div>
                <div class="dialog-text">您是否已年满18周岁？</div>
                <div class="dialog-buttons">
                    <button id="psite-age-no-btn" class="dialog-btn">否</button>
                    <button id="psite-age-yes-btn" class="dialog-btn">是</button>
                </div>
            </div>
        </div>
        <div id="psite-text-video-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog" style="width: 320px;">
                <div id="psite-video-title" class="dialog-title"></div>
                <div id="psite-video-content" class="dialog-text" style="text-align: left; max-height: 50vh; overflow-y: auto;"></div>
                <div class="dialog-buttons">
                    <button id="psite-video-close-btn" class="dialog-btn" style="width: 100%; border: none;">关闭</button>
                </div>
            </div>
        </div>
        
        <!-- 线下模式新增弹窗 -->
        <div id="offline-char-selection-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog">
                <div class="dialog-title">选择聊天角色</div>
                <div class="dialog-content" id="offline-char-selection-list"></div>
                <div class="dialog-buttons">
                    <button id="offline-char-selection-cancel-btn" class="dialog-btn">取消</button>
                </div>
            </div>
        </div>
        <div id="offline-persona-selection-dialog" class="ios-dialog-overlay">
            <div class="ios-dialog">
                <div class="dialog-title">选择你的面具</div>
                <div class="dialog-content" id="offline-persona-selection-list"></div>
                <div class="dialog-buttons">
                    <button id="offline-persona-selection-cancel-btn" class="dialog-btn">取消</button>
                </div>
            </div>
        </div>

        <!-- File Inputs -->
        <input type="file" id="character-import-input" accept=".json,.png" style="display: none;">
        <input type="file" id="world-book-upload-input" accept=".json" style="display: none;">
        <input type="file" id="preset-upload-input" accept=".json" style="display: none;">
        <input type="file" id="import-data-input" accept=".json" style="display:none;">
        <input type="file" id="chat-bg-upload-input" accept="image/*" style="display:none;">
        <input type="file" id="profile-avatar-upload-input" accept="image/*" style="display: none;">
        <input type="file" id="user-persona-avatar-upload-input" accept="image/*" style="display: none;">
        <input type="file" id="sticker-local-upload-input" accept="image/*" multiple style="display: none;">
        <input type="file" id="wallpaper-file-input" accept="image/*" style="display: none;">
        <input type="file" id="icon-file-input" accept="image/*" style="display: none;">
        <input type="file" id="psite-avatar-upload-input" accept="image/*" style="display: none;">
        <input type="file" id="regex-import-input" accept=".json" style="display: none;">
        <input type="file" id="photo-widget-input" accept="image/*" style="display: none;">
        
        <!-- 新增: 音乐播放器 -->
        <audio id="music-player" style="display: none;"></audio>
       
        <!-- 新增: 音乐相关文件输入 -->
        <input type="file" id="song-cover-input" accept="image/*" style="display: none;">
        <input type="file" id="song-file-input" accept=".mp3,audio/*" style="display: none;">
        <input type="file" id="song-lyrics-input" accept=".lrc,.txt" style="display: none;">
       
        <!-- ▼▼▼ 【修改后】的BGM搜索结果弹窗 ▼▼▼ -->
        <div id="music-search-results-modal" class="ios-dialog-overlay">
            <div class="ios-dialog" style="width: 320px; height: 70%;">
                <div class="dialog-title">搜索结果</div>
                <div class="dialog-content" id="search-results-list" style="padding: 0; max-height: calc(70vh - 100px); overflow-y: auto;">
                    <!-- 搜索结果将由JS动态生成在这里 -->
                </div>
                <div class="dialog-buttons">
                    <button id="cancel-music-search-btn" class="dialog-btn" style="width: 100%; border: none;">关闭</button>
                </div>
            </div>
        </div>
        <!-- ▲▲▲ HTML修改结束 ▲▲▲ -->

    </div>

    <!-- 在 body 结束前链接你的外部脚本 -->
    <script src="script.js" defer></script>
</body>
</html>
